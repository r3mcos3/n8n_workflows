{
  "name": "YouTube Weekly Digest (API Version)",
  "nodes": [
    {
      "id": "Schedule",
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        260,
        300
      ],
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "days",
              "hour": 23,
              "minute": 59
            }
          ]
        }
      }
    },
    {
      "id": "NetworkChuck",
      "name": "NetworkChuck",
      "type": "n8n-nodes-base.youTube",
      "typeVersion": 1,
      "position": [
        520,
        120
      ],
      "parameters": {
        "resource": "playlistItem",
        "operation": "getAll",
        "playlistId": "={{ \"UUOuGATIAbd2DvzJmUgXn2IQ\" }}",
        "limit": 10
      },
      "credentials": {
        "youTubeApi": {
          "id": "YOUR_CREDENTIAL_ID_HERE"
        }
      }
    },
    {
      "id": "ChristianLempa",
      "name": "Christian Lempa",
      "type": "n8n-nodes-base.youTube",
      "typeVersion": 1,
      "position": [
        520,
        300
      ],
      "parameters": {
        "resource": "playlistItem",
        "operation": "getAll",
        "playlistId": "={{ \"UUdSo-S0iMgFlfNln5qeUo0A\" }}",
        "limit": 10
      },
      "credentials": {
        "youTubeApi": {
          "id": "YOUR_CREDENTIAL_ID_HERE"
        }
      }
    },
    {
      "id": "ChrisTitusTech",
      "name": "Chris Titus Tech",
      "type": "n8n-nodes-base.youTube",
      "typeVersion": 1,
      "position": [
        520,
        480
      ],
      "parameters": {
        "resource": "playlistItem",
        "operation": "getAll",
        "playlistId": "={{ \"UUg6gPGh8HU2U01vaFCAsvmQ\" }}",
        "limit": 10
      },
      "credentials": {
        "youTubeApi": {
          "id": "YOUR_CREDENTIAL_ID_HERE"
        }
      }
    },
    {
      "id": "Merge",
      "name": "Merge",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3,
      "position": [
        800,
        300
      ],
      "parameters": {
        "mode": "append",
        "numberInputs": 3
      }
    },
    {
      "id": "FilterNew",
      "name": "Filter New Videos",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        1000,
        300
      ],
      "parameters": {
        "conditions": {
          "number": [
            {
              "value1": "={{ new Date($json.snippet.publishedAt).getTime() }}",
              "operation": "larger",
              "value2": "={{ Date.now() - 7*24*60*60*1000 }}"
            }
          ]
        }
      }
    },
    {
      "id": "Code",
      "name": "Build HTML",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1200,
        300
      ],
      "parameters": {
        "jsCode": "const videos = items.map(i => i.json);\nlet html = `\n<div style=\"font-family: Arial, sans-serif; color: #333; max-width: 600px; margin: 0 auto;\">\n  <h1 style=\"color: #c4302b; border-bottom: 2px solid #c4302b; padding-bottom: 10px;\">ðŸŽ¥ Nieuwe video's van deze week</h1>\n  <p>Hier zijn de nieuwste video's van <strong>NetworkChuck</strong>, <strong>Christian Lempa</strong> en <strong>Chris Titus Tech</strong>.</p>\n  <br>\n`;\n\nvideos.forEach(v => {\n  const snippet = v.snippet;\n  const title = snippet.title;\n  const videoId = snippet.resourceId.videoId;\n  const link = `https://www.youtube.com/watch?v=${videoId}`;\n  const published = new Date(snippet.publishedAt).toLocaleDateString('nl-NL');\n  const desc = snippet.description.split('\\n')[0];\n  const thumbnail = snippet.thumbnails?.medium?.url || '';\n\n  html += `\n  <div style=\"margin-bottom: 25px; padding-bottom: 25px; border-bottom: 1px solid #eee; display: flex; align-items: flex-start;\">\n    <a href=\"${link}\" style=\"flex-shrink: 0; margin-right: 30px;\">\n      <img src=\"${thumbnail}\" alt=\"${title}\" style=\"width: 160px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); display: block;\">\n    </a>\n    <div>\n      <h3 style=\"margin: 0 0 5px;\"><a href=\"${link}\" style=\"text-decoration: none; color: #2c3e50;\">${title}</a></h3>\n      <p style=\"margin: 0 0 8px; font-size: 0.85em; color: #7f8c8d;\">ðŸ“… ${published}</p>\n      <p style=\"margin: 0; font-size: 0.95em; line-height: 1.4;\">${desc}</p>\n    </div>\n  </div>\n  `;\n});\n\nhtml += `\n  <p style=\"text-align: center; font-size: 0.8em; color: #999; margin-top: 30px;\">\n    Automatisch gegenereerd door n8n\n  </p>\n</div>`;\n\nreturn [{ json: { html: html } }];"
      }
    },
    {
      "id": "Gmail",
      "name": "Send Gmail",
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        1400,
        300
      ],
      "parameters": {
        "resource": "message",
        "operation": "send",
        "subject": "Nieuwe YouTube video's deze week",
        "message": "={{ $json.html }}",
        "toEmail": "your@email.com"
      },
      "credentials": {
        "gmailOAuth2": {
          "id": "YOUR_GMAIL_CREDENTIAL_ID_HERE"
        }
      }
    }
  ],
  "connections": {
    "Schedule": {
      "main": [
        [
          {
            "node": "NetworkChuck",
            "type": "main",
            "index": 0
          },
          {
            "node": "ChristianLempa",
            "type": "main",
            "index": 0
          },
          {
            "node": "ChrisTitusTech",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "NetworkChuck": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ChristianLempa": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "ChrisTitusTech": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "FilterNew",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "FilterNew": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code": {
      "main": [
        [
          {
            "node": "Gmail",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}